<form [formGroup]="service.requestSummaryForm" class="formwidth">
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Workflow
      </mat-panel-title>
    </mat-expansion-panel-header> 
    <div class="formwidth" style="background: rgb(226, 213, 231) !important;">
    <mat-horizontal-stepper labelPosition="bottom" #stepper style="background: rgb(226, 213, 231) !important;">
    <!-- style="background: #DDD" -->
    <!-- > -->
    <mat-step state="done" label="Book Initiation">

    </mat-step>
    <mat-step label="Front Office">

      </mat-step>
      <mat-step label="Data Enrichment">

        </mat-step>
        <mat-step label="Enrichment Approval">

          </mat-step>
          <mat-step label="Controller User Access Review">

            </mat-step>
            <mat-step label="Source System Setup">

              </mat-step>
              <mat-step label="Completed">

                </mat-step>
      <ng-template matStepperIcon="done">
        <mat-icon>done</mat-icon>
      </ng-template>
      <ng-template matStepperIcon="edit">
        <mat-icon>edit</mat-icon>
      </ng-template>
    </mat-horizontal-stepper>    
    <div class="wrapper" *ngIf="selectedIndexChanged===false">    
        <mat-label style="margin: 20px;" #bookOpeningType>Click on this button to see approvers for this stage</mat-label>
        <button color="primary" mat-button (click)="selectionChange(stepper)" type="button">Show Approvers</button>               
        <br>
    </div>
  </div>
  </mat-expansion-panel>
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Generic Details
      </mat-panel-title>
    </mat-expansion-panel-header> 
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline" >
            <mat-label>Book Opening Type</mat-label>
            <input matInput formControlName="bookOpeningType" placeholder="Book Opening Type" [myFocus]="true" readonly >
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Ledger Book Id</mat-label>
            <input matInput placeholder="Ledger Book Id" formControlName="ledgerBookId" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Case Id</mat-label>
            <input matInput placeholder="Case Id" formControlName="caseId" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Date Requested</mat-label>
            <input matInput formControlName="dateRequested" placeholder="Date Requested" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Requested By</mat-label>
            <input matInput placeholder="Requested By" formControlName="requestedBy" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>WorkflowToolBookLinkingId</mat-label>
            <input matInput placeholder="WorkflowToolBookLinkingId" formControlName="workflowToolBookLinkingId" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Number of Source Books</mat-label>
            <input matInput formControlName="numberOfSourceBooks" placeholder="Number of Source Books" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Primary Book Name</mat-label>
            <input matInput placeholder="Primary Book Name" formControlName="primaryBookName" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Business Area</mat-label>
            <input matInput placeholder="Business Area" formControlName="businessArea" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Risk Only Book</mat-label>
            <input matInput formControlName="riskBook" placeholder="Risk Only Book" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Request Status</mat-label>
            <input matInput placeholder="Request Status" formControlName="requestStatus" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>User Access Id</mat-label>
            <input matInput placeholder="User Access Id" formControlName="userAccessId" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <div>
      <mat-card class="example-card">
        <mat-card-content > 
          <div class="approvers-table mat-elevation-z8">
            <mat-table [dataSource]="service.listData" #myTable>
              <ng-container matColumnDef="isPrimary">
                <th mat-header-cell *matHeaderCellDef>IsPrimary</th>
                <td mat-cell *matCellDef="let element">
                  <mat-checkbox [(ngModel)]="element.isPrimary" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="isNewLedger">
                <th mat-header-cell *matHeaderCellDef>IsNewLedger</th>
                <td mat-cell *matCellDef="let element" >
                  <mat-checkbox [(ngModel)]="element.isNewLedger" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="bookName">
                <th mat-header-cell *matHeaderCellDef >BookName</th>
                <td mat-cell *matCellDef="let element">{{element.bookName}}</td>
              </ng-container>
              <ng-container matColumnDef="sourceSystem">
                <th mat-header-cell *matHeaderCellDef >SourceSystem</th>
                <td mat-cell *matCellDef="let element">{{element.sourceSystem}}</td>
              </ng-container>
              <ng-container matColumnDef="sourceSystemLocation">
                <th mat-header-cell *matHeaderCellDef >SourceSystemLocation</th>
                <td mat-cell *matCellDef="let element">{{element.sourceSystemLocation}}</td>
              </ng-container>
              <ng-container matColumnDef="valuationAdjustmentBookType">
                <th mat-header-cell *matHeaderCellDef >ValuationAdjustmentBookType</th>
                <td mat-cell *matCellDef="let element">{{element.valuationAdjustmentBookType}}</td>
              </ng-container>
              <ng-container matColumnDef="bookClassification">
                <th mat-header-cell *matHeaderCellDef >BookClassification</th>
                <td mat-cell *matCellDef="let element">{{element.bookClassification}}</td>
              </ng-container>
              <ng-container matColumnDef="glPostingStatus">
                <th mat-header-cell *matHeaderCellDef >GLPostingStatus</th>
                <td mat-cell *matCellDef="let element">{{element.glPostingStatus}}</td>
              </ng-container>
              <ng-container matColumnDef="walkerPostingIndicator">
                <th mat-header-cell *matHeaderCellDef >WalkerPostingIndicator</th>
                <td mat-cell *matCellDef="let element">
                  <mat-checkbox [(ngModel)]="element.walkerPostingIndicator" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="walkerPostingSource">
                <th mat-header-cell *matHeaderCellDef >WalkerPostingSource</th>
                <td mat-cell *matCellDef="let element">{{element.walkerPostingSource}}</td>
              </ng-container>
              <ng-container matColumnDef="crFeed">
                <th mat-header-cell *matHeaderCellDef >CRFeed</th>
                <td mat-cell *matCellDef="let element">
                  <mat-checkbox [(ngModel)]="element.crFeed" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="mrFeed">
                <th mat-header-cell *matHeaderCellDef >MRFeed</th>
                <td mat-cell *matCellDef="let element">
                  <mat-checkbox [(ngModel)]="element.mrFeed" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="confirmationFlag">
                <th mat-header-cell *matHeaderCellDef >ConfirmationFlag</th>
                <td mat-cell *matCellDef="let element">
                  <mat-checkbox [(ngModel)]="element.confirmationFlag" [ngModelOptions]="{standalone: true}" class="mat-radio-button-content"></mat-checkbox>
                </td>
              </ng-container>
              <ng-container matColumnDef="settlementFlag">
                <th mat-header-cell *matHeaderCellDef >SettlementFlag</th>
                <td mat-cell *matCellDef="let element">{{element.settlementFlag}}</td>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table> 
          </div>
        </mat-card-content>
      </mat-card>  
      
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Ownership Attributes
      </mat-panel-title>
    </mat-expansion-panel-header> 
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Front Office (FO)</mat-label>
            <input matInput formControlName="frontOffice" placeholder="Front Office (FO)" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Finance Cost Centre Owner</mat-label>
            <input matInput placeholder="Finance Cost Centre Owner" formControlName="financeCostCentreOwner" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Trader Id</mat-label>
            <input matInput formControlName="traderId" placeholder="Trader Id" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Delegate Cost Centre Owner</mat-label>
            <input matInput placeholder="Delegate Cost Centre Owner" formControlName="delegateCostCentreOwner" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Secondary Trader</mat-label>
            <input matInput formControlName="secondaryTrader" placeholder="Secondary Trader" readonly>
          </mat-form-field>               
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Source Book Owner</mat-label>
            <input matInput formControlName="sourceBookOwner" placeholder="Source Book Owner" readonly>
          </mat-form-field>               
        </td>
      </tr>
    </table>   
  </mat-expansion-panel>
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Book Approvers
      </mat-panel-title>
    </mat-expansion-panel-header>  
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
        <mat-panel-title>
          Approvers List
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="example-container mat-elevation-z8">
        <mat-table #table [dataSource]="service.approversDataSource" class="approvers-table">
          
          <ng-container matColumnDef="personid">
            <th mat-header-cell *matHeaderCellDef class="sticky-header"> Person Id </th>
            <td mat-cell *matCellDef="let row">{{ row.personid }}</td>
          </ng-container>
          
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef class="sticky-header"> Person Name </th>
            <td mat-cell *matCellDef="let row">{{ row.name }}</td>              
          </ng-container> 
          
          <ng-container matColumnDef="groupName">
            <th mat-header-cell *matHeaderCellDef class="sticky-header"> Group Name </th>
            <td mat-cell *matCellDef="let row">{{ row.groupName }}</td>
          </ng-container>
          
          <ng-container matColumnDef="dataOwnerGroupId">
            <th mat-header-cell *matHeaderCellDef class="sticky-header"> Data Owner Group Id </th>
            <td mat-cell *matCellDef="let row">{{ row.dataOwnerGroupId }}</td>              
          </ng-container> 
          
          <mat-header-row *matHeaderRowDef="approversListColumns; sticky: true"></mat-header-row>
          <mat-row *matRowDef="let row; columns: approversListColumns;"></mat-row>
        </mat-table>                   
      </div>
    </mat-expansion-panel>    
  </mat-expansion-panel>
  <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        CostCentreAttributes
      </mat-panel-title>
    </mat-expansion-panel-header> 
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Parent Cost Centre Id</mat-label>
            <input matInput formControlName="costCentreId" placeholder="Parent Cost Centre Id" readonly>
          </mat-form-field> 
        </td> 
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Cost Centre Description</mat-label>
            <input matInput placeholder="Cost Center Description" formControlName="costCentreDescription" readonly>
          </mat-form-field>           
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Walker Business Unit</mat-label>
            <input matInput placeholder="Walker Business Unit" formControlName="walkerBusinessUnit" readonly>
          </mat-form-field>
        </td>     
      </tr>
    </table>       
    <table>
      <tr>
        <td><pre> </pre></td>
        <td>
          <mat-label class="mat-select-content">Active Indicator</mat-label>
          <mat-radio-group formControlName="activeIndicator" class="mat-radio-button-content">
            <mat-radio-button value="A">A</mat-radio-button>
            <mat-radio-button value="I">I</mat-radio-button>
          </mat-radio-group>
        </td>
        <td> <pre>                                  </pre></td>
        <td>    
          <mat-label>Trading/Banking Indicator</mat-label>
          <mat-radio-group formControlName="tradingBankingIndicator" class="mat-radio-button-content">
            <mat-radio-button value="T">T</mat-radio-button>
            <mat-radio-button value="B">B</mat-radio-button>
          </mat-radio-group>
        </td>
      </tr>
    </table> 
    <br>
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Ledger Sets of Book Id</mat-label>
            <input matInput placeholder="Ledger Sets of Book Id" formControlName="ledgerSetsBookId" readonly>
          </mat-form-field>
        </td>   
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Country of Trading Location</mat-label>
            <input matInput placeholder="Country of Trading Location" formControlName="countryTradingLocation" readonly>
          </mat-form-field>
        </td>  
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Legal Entity-Level</mat-label>
            <input matInput placeholder="Legal Entity-Level" formControlName="legalEntityLevel" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>        
    
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Book Balance Sheet Entity</mat-label>
            <input matInput placeholder="Book Balance Sheet Entity" formControlName="bookBalanceSheetEntity" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Balance Sheet City</mat-label>
            <input matInput placeholder="Balance Sheet City" formControlName="balanceSheetCity" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Division</mat-label>
            <input matInput placeholder="Division"  formControlName="division" readonly>
          </mat-form-field>
        </td>
      </tr>
    </table>     
  </mat-expansion-panel>
  <mat-expansion-panel [expanded]="true"> 
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Other Attributes
      </mat-panel-title>
    </mat-expansion-panel-header>     
    <table class="fullwidth" cellspacing="0">
      <tr>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Effective Date</mat-label>
            <input matInput placeholder="Effective Date" formControlName="effectiveDate" readonly>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="mat-select-content" appearance="outline">
            <mat-label>Additional Comments</mat-label>
            <textarea matInput placeholder="Additional Comments" formControlName="comments" readonly></textarea>
          </mat-form-field>
        </td>
      </tr>
    </table>  
  </mat-expansion-panel> 
  <mat-expansion-panel [expanded]="true"> 
    <mat-expansion-panel-header [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
      <mat-panel-title>
        Request Comments
      </mat-panel-title>
    </mat-expansion-panel-header> 
  </mat-expansion-panel>
  <div class="button-row">
    <br>
    <button mat-raised-button color="primary" type="button" (click)="onSubmit(stepper)">Proceed</button>
    <button mat-raised-button color="primary" type="button" (click)="onClear(stepper)">Reject</button>
  </div> 
  <br>
  <mat-label class="message">{{service.message}}</mat-label>
  <br>
</form> 



